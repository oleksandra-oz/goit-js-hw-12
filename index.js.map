{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47411566-1fe68ca00fdccc973e940a4de';\n\nexport async function fetchImages(value, page) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n  });\n\n  const response = await axios.get(`https://pixabay.com/api/?${params}`);\n  return response.data;\n}\n\nexport async function fetchNextPage(value, page) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page,\n  });\n\n  const response = await axios.get(`https://pixabay.com/api/?${params}`);\n\n  return response.data;\n}","export function renderImages(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <a href=\"${largeImageURL}\" class=\"list-item\">\n      <div class=\"thumb\"><img src=\"${webformatURL}\" alt=\"${tags}\" class=\"list-img\"></div>\n      <ul class=\"info-box\">\n      <li class=\"info-item\">\n      <h2 class=\"info-text\">Likes</h2>\n      <p class=\"info-amount\">${likes}</p>\n      </li>\n      <li class=\"info-item\">\n      <h2 class=\"info-text\">Views</h2>\n      <p class=\"info-amount\">${views}</p>\n      </li>\n      <li class=\"info-item\">\n      <h2 class=\"info-text\">Comments</h2>\n      <p class=\"info-amount\">${comments}</p>\n      </li>\n      <li class=\"info-item\">\n      <h2 class=\"info-text\">Downloads</h2>\n      <p class=\"info-amount\">${downloads}</p>\n      </li>\n      </ul>\n      </a>\n        `\n    )\n    .join('');\n}","import axios from 'axios';\nimport { fetchImages, fetchNextPage } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.form');\nconst list = document.querySelector('.list');\nconst loading = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst input = document.querySelector('.input');\n\nform.addEventListener('submit', submitForm);\nloadMoreBtn.addEventListener('click', loadMorePictures);\n\nlet page;\nlet value;\n\nasync function submitForm(event) {\n  event.preventDefault();\n\n  page = 1;\n  value = input.value;\n\n  loadMoreBtn.style.display = 'none';\n\n  loading.style.display = 'inline-block';\n\n  list.innerHTML = '';\n\n  if (event.currentTarget.elements.search.value.trim() === '') {\n    loading.style.display = 'none';\n    clearGallery();\n    return;\n  }\n\n  await fetchImages(value, page)\n    .then(data => {\n      if (data.total === 0) {\n        loading.style.display = 'none';\n        clearGallery();\n        return;\n      }\n\n      loading.style.display = 'none';\n\n      list.insertAdjacentHTML('beforeend', renderImages(data.hits));\n\n      initSimpleLightbox();\n\n      const total = data.totalHits;\n      const totalPages = Math.ceil(total / 15);\n\n      if (page >= totalPages) {\n        iziToast.info({\n          position: 'topRight',\n          message:\n            \"We're sorry, but there are no more images for your request.\",\n        });\n        loadMoreBtn.style.display = 'none';\n        return;\n      }\n\n      page++;\n      loadMoreBtn.style.display = 'block';\n    })\n    .catch(error => {\n      loading.style.display = 'none';\n      iziToast.error({\n        position: 'topRight',\n        message: error.message,\n        maxWidth: 432,\n      });\n    });\n}\n\nfunction clearGallery() {\n  iziToast.error({\n    position: 'topRight',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    maxWidth: 432,\n  });\n  list.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n}\n\nfunction initSimpleLightbox() {\n  const lightbox = new SimpleLightbox('.list-item', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 150,\n  });\n\n  lightbox.refresh();\n}\n\nasync function loadMorePictures(event) {\n  event.preventDefault();\n  loadMoreBtn.style.display = 'none';\n  loading.style.display = 'inline-block';\n\n  await fetchNextPage(value, page)\n    .then(data => {\n      loading.style.display = 'none';\n      list.insertAdjacentHTML('beforeend', renderImages(data.hits));\n      scrollBy();\n\n      initSimpleLightbox();\n\n      const total = data.totalHits;\n      const totalPages = Math.ceil(total / 15);\n\n      if (page >= totalPages) {\n        iziToast.info({\n          position: 'topRight',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        loadMoreBtn.style.display = 'none';\n        return;\n      }\n\n      page++;\n      loadMoreBtn.style.display = 'block';\n    })\n    .catch(error => {\n      loading.style.display = 'none';\n      iziToast.error({\n        position: 'topRight',\n        message: error.message,\n        maxWidth: 432,\n      });\n    });\n}\n\nfunction scrollBy() {\n  const card = document.querySelector('.list-item');\n  const cardHeight = card.getBoundingClientRect().height;\n\n  window.scrollBy({\n    left: 0,\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}"],"names":["API_KEY","fetchImages","value","page","params","axios","fetchNextPage","renderImages","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","list","loading","loadMoreBtn","input","submitForm","loadMorePictures","event","clearGallery","data","initSimpleLightbox","total","totalPages","iziToast","error","SimpleLightbox","scrollBy","cardHeight"],"mappings":"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"}